<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Талантополия</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
</head>

<body>
    <!-- <header class="header">
        <nav class="nav"> -->
            <!-- <a href="#">Для кого?</a>
            <a href="#">Обо мне</a>
            <a href="#">Гарантии</a>
            <a href="#">Программы</a> -->
            <!-- <a href="#feature-link">Обо мне</a>
            <a href="#my-projects">Мои проекты</a>
            <a href="#01-tal">Талантополия</a>
            <a href="#trains">Тренинги</a>
            <a href="#03-courses">Курсы</a>
            <a href="#contact-link">Контакты</a>
        </nav>
        <div class="logo"><img src="./media/img/logo.png" alt=""></div>
        <div class="class-slider">
            <div class="class-slide__item">
                <div class="icon-wrap">
                    <img src="./media/img/governance-w.png" alt="">
                </div>
                <span>Гос-сфера</span>
            </div>
            <div id="active-product" class="class-slide__item">
                <div class="icon-wrap">
                    <img src="./media/img/market-w.png" alt="">
                </div>
                <span>Бизнес</span>
            </div>
        </div> -->
        <!-- <div class="buttons">
            <button class="btn btn-outline">Корпы</button>
            <button class="btn btn-dark">Госсектор</button>
        </div> -->
    <!-- </header> -->
    <header class="header">
        <button class="menu-toggle">
            <img src="./media/img/menu.png" alt="">
        </button>
        
        <div class="logo"><img src="./media/img/logo.png" alt="Логотип"></div>
        
        <nav class="nav">
            <!-- <a href="#">Для кого?</a>
            <a href="#">Обо мне</a>
            <a href="#">Гарантии</a>
            <a href="#">Программы</a> -->
            <a href="#feature-link">Обо мне</a>
            <a href="#my-projects">Мои проекты</a>
            <a href="#01-tal">Талантополия</a>
            <a href="#trains">Тренинги</a>
            <a href="#03-courses">Курсы</a>
            <a href="#contact-link">Контакты</a>
        </nav>
        
        <div class="class-slider">
            <div class="class-slide__item">
                <div class="icon-wrap">
                    <img src="./media/img/governance-w.png" alt="Госсектор">
                </div>
                <span>Гос-сфера</span>
            </div>
            <div class="class-slide__item active">
                <div class="icon-wrap">
                    <img src="./media/img/market-w.png" alt="Бизнес">
                </div>
                <span>Бизнес</span>
            </div>
        </div>
    </header>

    <main style="height: 100vh; display: flex;align-items: center;justify-content: center;">
        <h1>Этот раздел находится в разработке</h1>
    </main>
    <!-- <script src="./script.js"></script> -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script> -->
    <script>
        const dropdown = document.getElementById('myDropdown');
        // document.querySelector('#dropdown-menu-train').style.display = 'none';
        let category = ''

        const toogleName = document.querySelector('.dropdown-toggle')



        document.addEventListener('click', function (event) {
            if (!dropdown.contains(event.target)) {
                dropdown.classList.remove('open');
            }
        });
        const slideBtns = document.querySelectorAll('.class-slide__item')

        slideBtns.forEach((btn, index) => {
            if (btn.children[0].textContent === 'Гос-сфера') {
                swipper1.style.display = 'none'
                swipper2.style.display = 'block'
            } else if (btn.children[0].textContent === 'Бизнес') {
                swipper2.style.display = 'none'
                swipper1.style.display = 'block'
            }
            btn.addEventListener('click', () => {

                console.log(btn.getAttribute('id'));
                if (btn.getAttribute('id') === 'active-product') {
                    btn.removeAttribute('id')
                }
                btn.setAttribute('id', 'active-product')
                index === 0 ? slideBtns[index + 1].removeAttribute('id') : slideBtns[index - 1].removeAttribute('id')
                console.log(btn.children[0].textContent);
                if (btn.children[0].textContent === 'Гос-сфера') {
                    swipper1.style.display = 'none'
                    swipper2.style.display = 'block'
                } else if (btn.children[0].textContent === 'Бизнес') {
                    swipper2.style.display = 'none'
                    swipper1.style.display = 'block'
                }

            });
        })


        const orderBtns = document.querySelectorAll('.slide__btn__text')
        orderBtns.forEach((btn, index) => {
            btn.addEventListener('click', (e) => {
                const programmTitle = btn.parentNode.parentElement.querySelector('.slide__title').textContent
                category = 'programm'
                console.log(programmTitle, category);
                toggle.textContent = 'Выберите курс:'
                document.querySelector('#drop-train').style.display = 'none'
                document.querySelector('#dropdown-menu-course').style.display = 'block'

                if (programmTitle === 'Взлет') {

                } else if (programmTitle === 'Полет') {

                } else if (programmTitle === 'Орбита') {

                }
            });
        })

        const trainBtns = document.querySelectorAll('.training-table tr')
        trainBtns.forEach((btn, index) => {
            btn.addEventListener('click', (e) => {
                e.preventDefault()
                const eventTitle = btn.querySelector('.event-name').textContent
                const eventDesc = btn.querySelector('.description').textContent
                const eventDate = btn.querySelector('.date').textContent

                category = 'train'
                console.log(eventTitle, category);
                toggle.textContent = 'Выберите тренинг:'
                document.querySelector('#dropdown-menu-course').style.display = 'none'
                document.querySelector('#drop-train').style.display = 'none'

            });
        })



        const form = document.querySelector('.contact-form form');
        const nameInput = form.querySelector('input[type="text"]');
        const phoneInput = form.querySelector('input[type="tel"]');
        const emailInput = form.querySelector('input[type="email"]');
        const agreementCheckbox = form.querySelector('input[type="checkbox"]');
        const submitButton = form.querySelector('.submit-btn');

        function validateForm() {
            const isNameValid = nameInput.value.trim() !== '';
            const isPhoneValid = phoneInput.value.trim() !== '';
            const isEmailValid = emailInput.value.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/);
            const isAgreementChecked = agreementCheckbox.checked;

            submitButton.disabled = !(isNameValid && isPhoneValid && isEmailValid && isAgreementChecked);

            return isNameValid && isPhoneValid && isEmailValid && isAgreementChecked;
        }

        [nameInput, phoneInput, emailInput, agreementCheckbox].forEach(element => {
            element.addEventListener('input', validateForm);
            element.addEventListener('change', validateForm);
        });

        form.addEventListener('submit', async (e) => {
            e.preventDefault();

            if (!validateForm()) {
                alert('Пожалуйста, заполните все поля корректно.');
                return;
            }

            const formData = {
                name: nameInput.value,
                phone: phoneInput.value,
                email: emailInput.value
            };

            try {
                const response = await fetch('http://localhost:3000/submit-form', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(formData)
                });

                if (response.ok) {
                    alert('Заявка успешно отправлена!');
                    form.reset();
                    submitButton.disabled = true;
                } else {
                    throw new Error('Ошибка отправки');
                }
            } catch (error) {
                alert('Произошла ошибка при отправке заявки');
                console.error('Error:', error);
            }
        });
        // Маска для телефона

        phoneInput.addEventListener('input', function (e) {
            let value = e.target.value.replace(/\D/g, '');
            if (value.length > 0) {
                value = `+7(${value.substring(1, 4)})${value.substring(4, 7)}-${value.substring(7, 11)}`;
            }
            e.target.value = value;
        });


        // Маска для email
        emailInput.addEventListener('input', function (e) {
            const email = e.target.value;
            const regex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
            if (!regex.test(email)) {
                e.target.classList.add('invalid');
            } else {
                e.target.classList.remove('invalid');
            }
        });
        // const marquee = document.querySelector('.marquee');
        // const clone = marquee.cloneNode(true);
        // const slider = document.querySelector('.slider');

        // // Create 10 cards
        // for (let i = 0; i < 10; i++) {
        //     const card = `
        //         <div class="card">
        //             <div class="card-content">
        //                 <div class="card-image"></div>
        //                 <div class="arrow-icon">
        //                     <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
        //                         <path d="M3 13L13 3M13 3H5M13 3V11" stroke="white" stroke-width="2"/>
        //                     </svg>
        //                 </div>
        //                 <h3 class="card-title">Ораторское исскуство${i}.<br>Логика речи.</h3>
        //                 <button class="card-button">
        //                     Оставить заявку
        //                     <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
        //                         <path d="M3 8H13M13 8L8 3M13 8L8 13" stroke="white" stroke-width="2"/>
        //                     </svg>
        //                 </button>
        //             </div>
        //         </div>
        //     `;
        //     slider.insertAdjacentHTML('beforeend', card);
        // }

        // const sliderContainer = document.querySelector('.slider-container');
        // let isDown = false;
        // let startX;
        // let initialTranslate = 0;
        // let currentTranslate = 0;
        // let activeCard = null;

        // // Настройки слайдера
        // slider.style.display = 'flex'; // Добавляем flex-расположение
        // slider.style.willChange = 'transform'; // Оптимизация анимации

        // sliderContainer.addEventListener('mousedown', (e) => {
        //     isDown = true;
        //     sliderContainer.style.cursor = 'grabbing';
        //     startX = e.pageX - sliderContainer.getBoundingClientRect().left;
        //     initialTranslate = currentTranslate;
        //     slider.style.transition = 'none'; // Отключаем анимацию во время перетаскивания
        // });

        // sliderContainer.addEventListener('mouseleave', () => {
        //     isDown = false;
        //     sliderContainer.style.cursor = 'grab';
        //     slider.style.transition = 'transform 0.3s ease'; // Восстанавливаем анимацию
        //     if (activeCard) activeCard.classList.remove('active');
        // });

        // sliderContainer.addEventListener('mouseup', () => {
        //     isDown = false;
        //     sliderContainer.style.cursor = 'grab';
        //     slider.style.transition = 'transform 0.3s ease'; // Восстанавливаем анимацию
        //     if (activeCard) activeCard.classList.remove('active');
        // });

        // sliderContainer.addEventListener('mousemove', (e) => {
        //     if (!isDown) return;
        //     e.preventDefault();

        //     // Рассчитываем смещение
        //     const x = e.pageX - sliderContainer.getBoundingClientRect().left;
        //     const walk = (x - startX) * 2;
        //     currentTranslate = initialTranslate - walk;

        //     // Применяем трансформацию
        //     slider.style.transform = `translateX(${currentTranslate}px)`;

        //     // Определение активной карточки
        //     const cards = document.querySelectorAll('.card');
        //     const containerRect = sliderContainer.getBoundingClientRect();
        //     const containerCenter = containerRect.left + containerRect.width / 2;

        //     cards.forEach(card => {
        //         const cardRect = card.getBoundingClientRect();
        //         const cardCenter = cardRect.left + cardRect.width / 2;

        //         if (Math.abs(containerCenter - cardCenter) < cardRect.width / 2) {
        //             if (activeCard !== card) {
        //                 activeCard?.classList.remove('active');
        //                 card.classList.add('active');
        //                 activeCard = card;
        //             }
        //         }
        //     });
        // });


        //Слайдер для блока отзывов
        document.addEventListener('DOMContentLoaded', function () {
            const track = document.querySelector('.testimonials__track');
            const cards = document.querySelectorAll('.testimonial-card');
            const prevButton = document.querySelector('.nav-button.prev');
            const nextButton = document.querySelector('.nav-button.next');
            const progressBar = document.querySelector('.slider-progress__bar');

            let currentIndex = 0;
            let cardWidth = cards[0].offsetWidth + 20; // Card width + gap
            const totalSlides = cards.length;
            const visibleSlides = getVisibleSlides();
            const maxIndex = totalSlides - visibleSlides;

            // Initialize progress bar
            updateProgressBar();

            // Handle window resize
            window.addEventListener('resize', function () {
                cardWidth = cards[0].offsetWidth + 20;
                updateSliderPosition();
                updateProgressBar();
            });

            // Navigation buttons
            prevButton.addEventListener('click', function () {
                if (currentIndex > 0) {
                    currentIndex--;
                    updateSliderPosition();
                    updateProgressBar();
                }
            });

            nextButton.addEventListener('click', function () {
                if (currentIndex < maxIndex) {
                    currentIndex++;
                    updateSliderPosition();
                    updateProgressBar();
                }
            });

            // Video play buttons
            const videoElements = document.querySelectorAll('.testimonial-card__video');
            videoElements.forEach(video => {
                video.addEventListener('click', function () {
                    // This would typically trigger a video player
                    alert('Video player would open here');
                });
            });

            // Helper functions
            function updateSliderPosition() {
                track.style.transform = `translateX(-${currentIndex * cardWidth}px)`;
            }

            function updateProgressBar() {
                const progress = (currentIndex / maxIndex) * 100;
                progressBar.style.width = `${progress}%`;
            }

            function getVisibleSlides() {
                const viewportWidth = window.innerWidth;
                if (viewportWidth < 768) return 1;
                if (viewportWidth < 1024) return 2;
                return 3;
            }



            const videoElementMeetClose = document.querySelector('#meet-close')
            const videoElementAboutProg = document.querySelector('#about-prog')

            videoElementMeetClose.addEventListener('click', function () {
                videoElementMeet.pause()
                videoElementMeet.currentTime = 0
            })

            videoElementMeetClose.addEventListener('click', function () {
                videoElementMeet.pause()
                videoElementMeet.currentTime = 0
            })
        });


        document.addEventListener('DOMContentLoaded', function () {
            // Slider functionality
            const sliderTrack = document.querySelector('.slider-track');
            const prevButton = document.querySelector('.slider-arrow.prev');
            const nextButton = document.querySelector('.slider-arrow.next');
            const projectCards = document.querySelectorAll('.project-card');

            // Modal elements
            const modal = document.getElementById('projectModal');
            const modalImage = document.getElementById('modalImage');
            const modalTitle = document.getElementById('modalTitle');
            const modalDescription = document.getElementById('modalDescription');
            const closeButton = document.querySelector('.modal-close');

            // Calculate the width to scroll
            let cardWidth = projectCards[0].offsetWidth + 20; // Card width + gap

            // Update card width on window resize
            window.addEventListener('resize', function () {
                cardWidth = projectCards[0].offsetWidth + 20;
            });

            // Slider navigation
            prevButton.addEventListener('click', function () {
                sliderTrack.scrollBy({
                    left: -cardWidth,
                    behavior: 'smooth'
                });
            });

            nextButton.addEventListener('click', function () {
                sliderTrack.scrollBy({
                    left: cardWidth,
                    behavior: 'smooth'
                });
            });

            // Open modal when clicking on a project card
            projectCards.forEach(card => {
                card.addEventListener('click', function () {
                    const imageUrl = this.getAttribute('data-image');
                    const title = this.querySelector('.project-title').textContent;
                    const description = this.querySelector('.project-description').textContent;

                    // Set modal content
                    modalImage.src = imageUrl;
                    modalTitle.textContent = title;
                    modalDescription.textContent = description;

                    // Show modal
                    modal.classList.add('active');
                    document.body.style.overflow = 'hidden'; // Prevent scrolling
                });
            });

            // Close modal
            closeButton.addEventListener('click', closeModal);

            // Close modal when clicking outside the content
            modal.addEventListener('click', function (e) {
                if (e.target === modal) {
                    closeModal();
                }
            });

            // Close modal with Escape key
            document.addEventListener('keydown', function (e) {
                if (e.key === 'Escape' && modal.classList.contains('active')) {
                    closeModal();
                }
            });

            function closeModal() {
                modal.classList.remove('active');
                document.body.style.overflow = ''; // Restore scrolling
            }

            // Touch swipe functionality for mobile
            let touchStartX = 0;
            let touchEndX = 0;

            sliderTrack.addEventListener('touchstart', function (e) {
                touchStartX = e.changedTouches[0].screenX;
            }, false);

            sliderTrack.addEventListener('touchend', function (e) {
                touchEndX = e.changedTouches[0].screenX;
                handleSwipe();
            }, false);

            function handleSwipe() {
                const swipeThreshold = 50;

                if (touchEndX < touchStartX - swipeThreshold) {
                    // Swipe left - go to next
                    sliderTrack.scrollBy({
                        left: cardWidth,
                        behavior: 'smooth'
                    });
                }

                if (touchEndX > touchStartX + swipeThreshold) {
                    // Swipe right - go to previous
                    sliderTrack.scrollBy({
                        left: -cardWidth,
                        behavior: 'smooth'
                    });
                }
            }
        });
        document.addEventListener('DOMContentLoaded', function() {
    const menuToggle = document.querySelector('.menu-toggle');
    const nav = document.querySelector('.nav');
    
    function toggleMenu() {
        menuToggle.classList.toggle('active');
        nav.classList.toggle('active');
    }
    
    function closeMenu(e) {
        if (!nav.contains(e.target) && !menuToggle.contains(e.target)) {
            menuToggle.classList.remove('active');
            nav.classList.remove('active');
        }
    }
    
    // Обработчики событий
    menuToggle.addEventListener('click', toggleMenu);
    document.addEventListener('click', closeMenu);
    window.addEventListener('resize', () => {
        if (window.innerWidth > 1200) {
            menuToggle.classList.remove('active');
            nav.classList.remove('active');
        }
    });
    
    // Закрытие меню при клике на ссылки
    nav.querySelectorAll('a').forEach(link => {
        link.addEventListener('click', () => {
            if (window.innerWidth <= 1200) {
                toggleMenu();
            }
        });
    });
});
    </script>
</body>

</html>